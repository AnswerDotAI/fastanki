<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="API source and details">

<title>Core API – fastanki</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-baedc78cbf92349237790bf011c153e8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Core API – fastanki">
<meta property="og:description" content="API source and details">
<meta property="og:site_name" content="fastanki">
<meta name="twitter:title" content="Core API – fastanki">
<meta name="twitter:description" content="API source and details">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">fastanki</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./core.html">Core API</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">fastanki</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Core API</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#oo-api" id="toc-oo-api" class="nav-link active" data-scroll-target="#oo-api">OO API</a>
  <ul class="collapse">
  <li><a href="#data_path" id="toc-data_path" class="nav-link" data-scroll-target="#data_path">data_path</a></li>
  <li><a href="#profiles" id="toc-profiles" class="nav-link" data-scroll-target="#profiles">profiles</a></li>
  <li><a href="#collection.open" id="toc-collection.open" class="nav-link" data-scroll-target="#collection.open">Collection.open</a></li>
  <li><a href="#collection.load_auth" id="toc-collection.load_auth" class="nav-link" data-scroll-target="#collection.load_auth">Collection.load_auth</a></li>
  <li><a href="#collection.save_auth" id="toc-collection.save_auth" class="nav-link" data-scroll-target="#collection.save_auth">Collection.save_auth</a></li>
  <li><a href="#collection.sync" id="toc-collection.sync" class="nav-link" data-scroll-target="#collection.sync">Collection.sync</a></li>
  <li><a href="#close_all" id="toc-close_all" class="nav-link" data-scroll-target="#close_all">close_all</a></li>
  <li><a href="#note.__repr__" id="toc-note.__repr__" class="nav-link" data-scroll-target="#note.__repr__">Note.__repr__</a></li>
  <li><a href="#deck" id="toc-deck" class="nav-link" data-scroll-target="#deck">Deck</a></li>
  <li><a href="#deckmanager.__getitem__" id="toc-deckmanager.__getitem__" class="nav-link" data-scroll-target="#deckmanager.__getitem__">DeckManager.__getitem__</a></li>
  <li><a href="#collection.add" id="toc-collection.add" class="nav-link" data-scroll-target="#collection.add">Collection.add</a></li>
  <li><a href="#collection.add_deck" id="toc-collection.add_deck" class="nav-link" data-scroll-target="#collection.add_deck">Collection.add_deck</a></li>
  <li><a href="#deck.__repr__" id="toc-deck.__repr__" class="nav-link" data-scroll-target="#deck.__repr__">Deck.__repr__</a></li>
  <li><a href="#card.__repr__" id="toc-card.__repr__" class="nav-link" data-scroll-target="#card.__repr__">Card.__repr__</a></li>
  <li><a href="#opchangeswithcount.__repr__" id="toc-opchangeswithcount.__repr__" class="nav-link" data-scroll-target="#opchangeswithcount.__repr__">OpChangesWithCount.__repr__</a></li>
  <li><a href="#decktreenode.__repr__" id="toc-decktreenode.__repr__" class="nav-link" data-scroll-target="#decktreenode.__repr__">DeckTreeNode.__repr__</a></li>
  <li><a href="#decknameid.__repr__" id="toc-decknameid.__repr__" class="nav-link" data-scroll-target="#decknameid.__repr__">DeckNameId.__repr__</a></li>
  <li><a href="#deckmanager.__repr__" id="toc-deckmanager.__repr__" class="nav-link" data-scroll-target="#deckmanager.__repr__">DeckManager.__repr__</a></li>
  <li><a href="#notetypenameid.__repr__" id="toc-notetypenameid.__repr__" class="nav-link" data-scroll-target="#notetypenameid.__repr__">NotetypeNameId.__repr__</a></li>
  <li><a href="#modelmanager.__repr__" id="toc-modelmanager.__repr__" class="nav-link" data-scroll-target="#modelmanager.__repr__">ModelManager.__repr__</a></li>
  </ul></li>
  <li><a href="#functional-api" id="toc-functional-api" class="nav-link" data-scroll-target="#functional-api">Functional API</a>
  <ul class="collapse">
  <li><a href="#collection.__exit__" id="toc-collection.__exit__" class="nav-link" data-scroll-target="#collection.__exit__">Collection.__exit__</a></li>
  <li><a href="#collection.__enter__" id="toc-collection.__enter__" class="nav-link" data-scroll-target="#collection.__enter__">Collection.__enter__</a></li>
  <li><a href="#add_card" id="toc-add_card" class="nav-link" data-scroll-target="#add_card">add_card</a></li>
  <li><a href="#add_fb_card" id="toc-add_fb_card" class="nav-link" data-scroll-target="#add_fb_card">add_fb_card</a></li>
  <li><a href="#find_cards" id="toc-find_cards" class="nav-link" data-scroll-target="#find_cards">find_cards</a></li>
  <li><a href="#find_card_ids" id="toc-find_card_ids" class="nav-link" data-scroll-target="#find_card_ids">find_card_ids</a></li>
  <li><a href="#find_notes" id="toc-find_notes" class="nav-link" data-scroll-target="#find_notes">find_notes</a></li>
  <li><a href="#find_note_ids" id="toc-find_note_ids" class="nav-link" data-scroll-target="#find_note_ids">find_note_ids</a></li>
  <li><a href="#update_note" id="toc-update_note" class="nav-link" data-scroll-target="#update_note">update_note</a></li>
  <li><a href="#update_fb_note" id="toc-update_fb_note" class="nav-link" data-scroll-target="#update_fb_note">update_fb_note</a></li>
  <li><a href="#get_note" id="toc-get_note" class="nav-link" data-scroll-target="#get_note">get_note</a></li>
  <li><a href="#del_card" id="toc-del_card" class="nav-link" data-scroll-target="#del_card">del_card</a></li>
  <li><a href="#sync" id="toc-sync" class="nav-link" data-scroll-target="#sync">sync</a></li>
  <li><a href="#anki_tools" id="toc-anki_tools" class="nav-link" data-scroll-target="#anki_tools">anki_tools</a></li>
  <li><a href="#add_cloze_card" id="toc-add_cloze_card" class="nav-link" data-scroll-target="#add_cloze_card">add_cloze_card</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/AnswerDotAI/fastanki/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="core.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Core API</h1>
</div>

<div>
  <div class="description">
    API source and details
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div id="e77f5743" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> os.environ[<span class="st">'ANKI_USER'</span>]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>passw <span class="op">=</span> os.environ[<span class="st">'ANKI_PASS'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="oo-api" class="level2">
<h2 class="anchored" data-anchor-id="oo-api">OO API</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L30" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="data_path" class="level3">
<h3 class="anchored" data-anchor-id="data_path">data_path</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data_path(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return the default Anki data folder for this OS.</em></p>
<div id="47ee6cfe" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data_path()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>Path('/Users/racheltho/Library/Application Support/Anki2')</code></pre>
</div>
</div>
<div id="bd35cd69" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_path().ls()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[Path('/Users/racheltho/Library/Application Support/Anki2/User 1')]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L39" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="profiles" class="level3">
<h3 class="anchored" data-anchor-id="profiles">profiles</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> profiles(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>List available Anki profile names.</em></p>
<div id="498f3085" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>profiles()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['User 1']</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L54" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.open" class="level3">
<h3 class="anchored" data-anchor-id="collection.open">Collection.open</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="bu">open</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    profile:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Open a collection by profile name (creates if needed).</em></p>
<p>Class method to open a collection by profile name. Handles backend reuse, creates profile folder if needed, and stores <code>profile_path</code> for auth persistence.</p>
<div id="7665cf71" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>col <span class="op">=</span> Collection.<span class="bu">open</span>()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>col.profile_path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>Path('/Users/racheltho/Library/Application Support/Anki2/User 1')</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L76" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.load_auth" class="level3">
<h3 class="anchored" data-anchor-id="collection.load_auth">Collection.load_auth</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_auth(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Load SyncAuth from profile folder, or None if not found.</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L71" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.save_auth" class="level3">
<h3 class="anchored" data-anchor-id="collection.save_auth">Collection.save_auth</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_auth(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    auth</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Persist SyncAuth to profile folder.</em></p>
<p>Auth persistence methods: <code>save_auth</code> writes the <code>SyncAuth</code> protobuf to disk, <code>load_auth</code> reads it back. The endpoint is crucial — AnkiWeb may redirect you to a different sync server.</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L86" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.sync" class="level3">
<h3 class="anchored" data-anchor-id="collection.sync">Collection.sync</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sync(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    user:NoneType<span class="op">=</span><span class="va">None</span>, passw:NoneType<span class="op">=</span><span class="va">None</span>, media:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, upload:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="1abf160c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>note <span class="op">=</span> col.newNote()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>note.fields[<span class="dv">0</span>] <span class="op">=</span> <span class="st">"Test card front"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>note.fields[<span class="dv">1</span>] <span class="op">=</span> <span class="st">"Test card back"</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>col.addNote(note)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>1</code></pre>
</div>
</div>
<div id="bdf39671" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> col.sync(user<span class="op">=</span>user, passw<span class="op">=</span>passw)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>required: NORMAL_SYNC</code></pre>
</div>
</div>
<p>Full sync implementation: loads saved auth (or logs in), handles endpoint changes, re-authenticates on failure, and manages full upload/download when required.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First sync requires credentials</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>col.sync(user<span class="op">=</span>user, passw<span class="op">=</span>passw)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Subsequent syncs use saved auth</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>col.sync()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L118" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="close_all" class="level3">
<h3 class="anchored" data-anchor-id="close_all">close_all</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> close_all(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Close all open Anki backends (nuclear option for crash recovery).</em></p>
<p>Nuclear option for crash recovery — scans all Python objects to find and close any open Rust backends.</p>
<div id="7a0178c9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>col.models</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li>Basic</li>
<li>Basic (and reversed card)</li>
<li>Basic (optional reversed card)</li>
<li>Basic (type in the answer)</li>
<li>Cloze</li>
<li>Image Occlusion</li>
</ul>
</div>
</div>
<p>Markdown representations for decks. <code>DeckManager</code> lists deck names, <code>DeckNameId</code> shows name/id, <code>DeckTreeNode</code> shows name with due counts.</p>
<div id="39578f26" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>col.sched.deck_due_tree().children[<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Default</strong>: 11 new, 0 learn, 5 review</p>
</div>
</div>
<div id="5b4ef7f5" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>col.decks</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li>Default</li>
<li>Precalculus</li>
</ul>
</div>
</div>
<p>Enables dict-style access: <code>col.models['Basic']</code> returns the model dict, <code>col.decks['Default']</code> returns the deck id.</p>
<div id="7c96a7c4" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>mdl <span class="op">=</span> col.models[<span class="st">'Basic'</span>]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>mdl[<span class="st">'id'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>1764652425113</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L153" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="note.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="note.__repr__">Note.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<div id="66d197f7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>note <span class="op">=</span> col.new_note(mdl)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>note[<span class="st">'Front'</span>], note[<span class="st">'Back'</span>] <span class="op">=</span> <span class="st">'hola'</span>, <span class="st">'hello'</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>note</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Front</strong>: hola | <strong>Back</strong>: hello</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L162" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="deck" class="level3">
<h3 class="anchored" data-anchor-id="deck">Deck</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Deck(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    col, name</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Initialize self. See help(type(self)) for accurate signature.</em></p>
<p>Wrapper class for a deck with convenient <code>.add()</code>, <code>.due</code> (new/learn/review counts), and <code>.cards</code> (list of card ids).</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L181" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="deckmanager.__getitem__" class="level3">
<h3 class="anchored" data-anchor-id="deckmanager.__getitem__">DeckManager.__getitem__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__getitem__</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    name</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L185" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.add" class="level3">
<h3 class="anchored" data-anchor-id="collection.add">Collection.add</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    model:NoneType<span class="op">=</span><span class="va">None</span>, deck:NoneType<span class="op">=</span><span class="va">None</span>, tags:NoneType<span class="op">=</span><span class="va">None</span>, fields:VAR_KEYWORD</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add a note with the given fields.</em></p>
<p>Convenient method to add a note with keyword arguments for fields. Defaults to Basic model and Default deck.</p>
<div id="6181b21c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>note2 <span class="op">=</span> col.add(Front<span class="op">=</span><span class="st">'hola'</span>, Back<span class="op">=</span><span class="st">'hello'</span>, tags<span class="op">=</span>[<span class="st">'spanish'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L197" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.add_deck" class="level3">
<h3 class="anchored" data-anchor-id="collection.add_deck">Collection.add_deck</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_deck(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    name</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create a deck (use :: for nesting).</em></p>
<p>Creates a new deck. Use <code>::</code> for nested decks (e.g.&nbsp;<code>"Spanish::Vocab"</code> creates Vocab inside Spanish).</p>
<div id="a8b28fdb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>col.add_deck(<span class="st">'Spanish::Vocab'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>changes {
  deck: true
  browser_table: true
  browser_sidebar: true
  study_queues: true
  mtime: true
}
id: 1772224367444</code></pre>
</div>
</div>
<div id="9a425a48" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>deck <span class="op">=</span> col.decks[<span class="st">'Spanish::Vocab'</span>]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>deck.add(Front<span class="op">=</span><span class="st">'adiós'</span>, Back<span class="op">=</span><span class="st">'goodbye'</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>deck.due</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Vocab</strong>: 1 new, 0 learn, 0 review</p>
</div>
</div>
<div id="aa513954" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>col.remove_notes([note2.<span class="bu">id</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>✓ 1 change(s)</p>
</div>
</div>
<div id="9b4bb471" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>col.decks.remove([col.decks.id_for_name(<span class="st">'Spanish'</span>)])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>✓ 1 change(s)</p>
</div>
</div>
<div id="4ef31e45" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>col.sync()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Sync</strong>: NO_CHANGES</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L225" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="deck.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="deck.__repr__">Deck.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L222" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="card.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="card.__repr__">Card.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L219" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="opchangeswithcount.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="opchangeswithcount.__repr__">OpChangesWithCount.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L215" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="decktreenode.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="decktreenode.__repr__">DeckTreeNode.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L212" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="decknameid.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="decknameid.__repr__">DeckNameId.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L209" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="deckmanager.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="deckmanager.__repr__">DeckManager.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L206" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="notetypenameid.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="notetypenameid.__repr__">NotetypeNameId.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L203" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="modelmanager.__repr__" class="level3">
<h3 class="anchored" data-anchor-id="modelmanager.__repr__">ModelManager.__repr__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__repr__</span>(</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return repr(self).</em></p>
<div id="e180dbd7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>col.close()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="functional-api" class="level2">
<h2 class="anchored" data-anchor-id="functional-api">Functional API</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L232" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="collection.__exit__" class="level3">
<h3 class="anchored" data-anchor-id="collection.__exit__">Collection.__exit__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__exit__</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    args:VAR_POSITIONAL</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L229" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collection.__enter__" class="level3">
<h3 class="anchored" data-anchor-id="collection.__enter__">Collection.__enter__</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">__enter__</span>(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You can use <code>Collection</code> with Python’s <code>with</code> statement. This ensures the collection is always properly closed, even if an error occurs during your operations. No more orphaned database locks or forgotten cleanup calls.</p>
<div id="034c8ad9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> Collection.<span class="bu">open</span>() <span class="im">as</span> col: note <span class="op">=</span> col.add(Front<span class="op">=</span><span class="st">'hola'</span>, Back<span class="op">=</span><span class="st">'hello'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L235" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_card" class="level3">
<h3 class="anchored" data-anchor-id="add_card">add_card</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_card(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    profile:NoneType<span class="op">=</span><span class="va">None</span>, model:NoneType<span class="op">=</span><span class="va">None</span>, deck:NoneType<span class="op">=</span><span class="va">None</span>, tags:NoneType<span class="op">=</span><span class="va">None</span>, fields:VAR_KEYWORD</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add a card.</em></p>
<p><a href="https://AnswerDotAI.github.io/fastanki/core.html#add_card"><code>add_card</code></a> lets you create a new card with a single function call. Just pass your field values as keyword arguments. By default it uses the Basic note type and Default deck, but you can specify any model, deck, or tags you like.</p>
<div id="65096523" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>notezh <span class="op">=</span> add_card(Front<span class="op">=</span><span class="st">'你好'</span>, Back<span class="op">=</span><span class="st">'hello'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L241" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_fb_card" class="level3">
<h3 class="anchored" data-anchor-id="add_fb_card">add_fb_card</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_fb_card(</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    front:<span class="bu">str</span>, back:<span class="bu">str</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, model:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, deck:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, tags:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add a card with a <code>Front</code> and <code>Back</code> and return the id.</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L246" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="find_cards" class="level3">
<h3 class="anchored" data-anchor-id="find_cards">find_cards</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_cards(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    query:<span class="bu">str</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Find cards matching query string. Returns list of Note objects.</em></p>
<p><a href="https://AnswerDotAI.github.io/fastanki/core.html#find_cards"><code>find_cards</code></a> searches your collection and returns a list of <code>Card</code> objects. Pass any Anki search query as the first argument. Common query patterns: - <code>deck:Spanish</code> — cards in a specific deck - <code>tag:vocab</code> — cards with a tag - <code>front:hello</code> — match field content - <code>is:due</code> — cards due for review - <code>added:7</code> — added in the last 7 days</p>
<p>Combine with spaces (AND) or <code>OR</code>: <code>deck:Spanish tag:verb</code> finds Spanish cards tagged “verb”.</p>
<div id="94cfe336" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>cards <span class="op">=</span> find_cards(<span class="st">"deck:Default"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>cards</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[Card(1769220553306, nid=1769220312702, due=5, ivl=0, queue=0),
 Card(1771131052669, nid=1771131052669, due=12, ivl=0, queue=0),
 Card(1771131140690, nid=1771131140690, due=13, ivl=0, queue=0),
 Card(1771298205236, nid=1771298205236, due=14, ivl=0, queue=0),
 Card(1771994857427, nid=1771994857425, due=15, ivl=0, queue=0),
 Card(1771994862491, nid=1771994862491, due=18, ivl=0, queue=0),
 Card(1771994864613, nid=1771994864613, due=19, ivl=0, queue=0),
 Card(1771995456598, nid=1771995456598, due=22, ivl=0, queue=0),
 Card(1772223814874, nid=1772223814873, due=23, ivl=0, queue=0),
 Card(1772224020120, nid=1772224020120, due=24, ivl=0, queue=0),
 Card(1772224365000, nid=1772224365000, due=25, ivl=0, queue=0),
 Card(1772224370021, nid=1772224370021, due=28, ivl=0, queue=0),
 Card(1772224372112, nid=1772224372112, due=29, ivl=0, queue=0),
 Card(1772224372153, nid=1772224372153, due=30, ivl=0, queue=0),
 Card(1768961835197, nid=1768961835196, due=55, ivl=4, queue=2),
 Card(1769219943743, nid=1769219943743, due=57, ivl=3, queue=2),
 Card(1769144854211, nid=1769144854210, due=58, ivl=4, queue=2),
 Card(1769220066429, nid=1769220066429, due=59, ivl=5, queue=2),
 Card(1769220312702, nid=1769220312702, due=59, ivl=5, queue=2)]</code></pre>
</div>
</div>
<div id="84b4ba1e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>cards[<span class="dv">0</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>Card 1769220553306 (nid: 1769220312702, due: 5, ivl: 0d, queue: 0)</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L257" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="find_card_ids" class="level3">
<h3 class="anchored" data-anchor-id="find_card_ids">find_card_ids</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_card_ids(</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    query:<span class="bu">str</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Find card ids matching query string.</em></p>
<div id="8beb0c01" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>find_card_ids(<span class="st">"deck:Default"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[1769220553306, 1771131052669, 1771131140690, 1771298205236, 1771994857427, 1771994862491, 1771994864613, 1771995456598, 1772223814874, 1772224020120, 1772224365000, 1772224370021, 1772224372112, 1772224372153, 1768961835197, 1769219943743, 1769144854211, 1769220066429, 1769220312702]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L263" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="find_notes" class="level3">
<h3 class="anchored" data-anchor-id="find_notes">find_notes</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_notes(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    query:<span class="bu">str</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Find notes matching query string. Returns list of Note objects.</em></p>
<p><a href="https://AnswerDotAI.github.io/fastanki/core.html#find_notes"><code>find_notes</code></a> searches your collection and returns a list of <code>Note</code> objects (rather than <code>Card</code> objects). The query language is the same as <a href="https://AnswerDotAI.github.io/fastanki/core.html#find_cards"><code>find_cards</code></a> — all the same search patterns work. The difference is that <a href="https://AnswerDotAI.github.io/fastanki/core.html#find_notes"><code>find_notes</code></a> returns one result per note, while <a href="https://AnswerDotAI.github.io/fastanki/core.html#find_cards"><code>find_cards</code></a> may return multiple cards if a note generates more than one card (e.g., with Cloze or Basic-and-Reversed note types).</p>
<div id="02289ca8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>notes <span class="op">=</span> find_notes(<span class="st">"hello"</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>notes</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[Note(1771994864613, Front='hola', Back='hello', tags=[]),
 Note(1772224372112, Front='hola', Back='hello', tags=[]),
 Note(1772224372153, Front='你好', Back='hello', tags=[])]</code></pre>
</div>
</div>
<div id="bf73a12b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>note <span class="op">=</span> notes[<span class="dv">0</span>]</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>note</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Front</strong>: hola | <strong>Back</strong>: hello</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L269" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="find_note_ids" class="level3">
<h3 class="anchored" data-anchor-id="find_note_ids">find_note_ids</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_note_ids(</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    query:<span class="bu">str</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Find note ids matching query string.</em></p>
<div id="0b9de9df" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>find_note_ids(<span class="st">"hello"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[1771994864613, 1772224372112, 1772224372153]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L275" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="update_note" class="level3">
<h3 class="anchored" data-anchor-id="update_note">update_note</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_note(</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    note:<span class="bu">int</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, tags:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, add_tags:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, fields:VAR_KEYWORD</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Update an existing note’s fields and/or tags. Pass a Note object or note ID.</em></p>
<p><a href="https://AnswerDotAI.github.io/fastanki/core.html#update_note"><code>update_note</code></a> modifies an existing note’s fields and/or tags. Pass either a <code>Note</code> object or a note ID, along with any fields you want to change as keyword arguments. For tags: - <code>tags=['a','b']</code> — replaces all tags - <code>add_tags='newtag'</code> — adds without removing existing tags</p>
<div id="256d7f89" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>update_note(note, Back<span class="op">=</span><span class="st">"updated answer"</span>, tags<span class="op">=</span><span class="st">'testtag'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Front</strong>: hola | <strong>Back</strong>: updated answer | 🏷️ testtag</p>
</div>
</div>
<div id="6fee5ea1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>update_note(note, add_tags<span class="op">=</span><span class="st">'moretagz'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Front</strong>: hola | <strong>Back</strong>: updated answer | 🏷️ moretagz, testtag</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L287" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="update_fb_note" class="level3">
<h3 class="anchored" data-anchor-id="update_fb_note">update_fb_note</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_fb_note(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    note_id:<span class="bu">int</span>, front:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, back:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, tags:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, add_tags:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Update an existing note’s front/back fields and/or tags. Pass a Note object or note ID.</em></p>
<div id="a064861e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>update_fb_note(note, front<span class="op">=</span><span class="st">'I am new'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Front</strong>: I am new | <strong>Back</strong>: updated answer | 🏷️ moretagz, testtag</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L295" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="get_note" class="level3">
<h3 class="anchored" data-anchor-id="get_note">get_note</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_note(</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    note_id:<span class="bu">int</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Retrieve a note by ID.</em></p>
<div id="9cb746d1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>get_note(note.<span class="bu">id</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Front</strong>: I am new | <strong>Back</strong>: updated answer | 🏷️ moretagz, testtag</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L301" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="del_card" class="level3">
<h3 class="anchored" data-anchor-id="del_card">del_card</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> del_card(</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    notes:<span class="bu">int</span>, profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete card(s) by Note(s) or note id(s).</em></p>
<div id="92a44933" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>del_card([notezh, note])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>✓ 2 change(s)</p>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L308" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="sync" class="level3">
<h3 class="anchored" data-anchor-id="sync">sync</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sync(</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    profile:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, user:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, passw:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, media:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Sync collection, handling open/close automatically.</em></p>
<p><a href="https://AnswerDotAI.github.io/fastanki/core.html#sync"><code>sync</code></a> handles the entire sync lifecycle for you — opening the collection, authenticating with AnkiWeb, syncing, and closing up afterwards. The first time you sync, pass your AnkiWeb credentials; they’ll be saved for future use.</p>
<div id="ac69cb7c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>o <span class="op">=</span> sync(user<span class="op">=</span>user, passw<span class="op">=</span>passw) <span class="co"># First time</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sync()  # after that</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L314" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="anki_tools" class="level3">
<h3 class="anchored" data-anchor-id="anki_tools">anki_tools</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> anki_tools(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Adding cloze cards</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/fastanki/blob/main/fastanki/core.py#L317" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_cloze_card" class="level3">
<h3 class="anchored" data-anchor-id="add_cloze_card">add_cloze_card</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_cloze_card(</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    text, deck:<span class="bu">str</span><span class="op">=</span><span class="st">'Default'</span>, tags:NoneType<span class="op">=</span><span class="va">None</span>, back_extra:<span class="bu">str</span><span class="op">=</span><span class="st">''</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add a cloze deletion card.</em></p>
<div id="7fff88d9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>test_cloze <span class="op">=</span> add_cloze_card(<span class="st">"Minus times </span><span class="sc">{{</span><span class="st">c1::minus</span><span class="sc">}}</span><span class="st"> is always </span><span class="sc">{{</span><span class="st">c2::plus</span><span class="sc">}}</span><span class="st">"</span>, back_extra<span class="op">=</span><span class="st">"Proof. Let –𝑎 and –𝑏 represent any two negative numbers. Then (−𝑎)(−𝑏)=(−1)(𝑎)(−1)(𝑏)=𝑎𝑏(−1)(−1)=𝑎𝑏."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cce9fe5b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>get_note(test_cloze)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Text</strong>: Minus times {{c1::minus}} is always {{c2::plus}} | <strong>Back Extra</strong>: Proof. Let –𝑎 and –𝑏 represent any two negative numbers. Then (−𝑎)(−𝑏)=(−1)(𝑎)(−1)(𝑏)=𝑎𝑏(−1)(−1)=𝑎𝑏.</p>
</div>
</div>
<div id="64707f1c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>update_note(test_cloze, add_tags<span class="op">=</span><span class="st">'precalculus'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Text</strong>: Minus times {{c1::minus}} is always {{c2::plus}} | <strong>Back Extra</strong>: Proof. Let –𝑎 and –𝑏 represent any two negative numbers. Then (−𝑎)(−𝑏)=(−1)(𝑎)(−1)(𝑏)=𝑎𝑏(−1)(−1)=𝑎𝑏. | 🏷️ precalculus</p>
</div>
</div>
<div id="bc6690df" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>get_note(test_cloze)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>Text</strong>: Minus times {{c1::minus}} is always {{c2::plus}} | <strong>Back Extra</strong>: Proof. Let –𝑎 and –𝑏 represent any two negative numbers. Then (−𝑎)(−𝑏)=(−1)(𝑎)(−1)(𝑏)=𝑎𝑏(−1)(−1)=𝑎𝑏. | 🏷️ precalculus</p>
</div>
</div>
<div id="38bf8d5e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>del_card(test_cloze)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p>✓ 2 change(s)</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/AnswerDotAI\.github\.io\/fastanki");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/AnswerDotAI/fastanki/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>